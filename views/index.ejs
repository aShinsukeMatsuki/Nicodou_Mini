<!DOCTYPE html>
<html>
<head>
<title><%= title %></title>
 <link rel='stylesheet' href='/stylesheets/style.css' />

 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script type="text/javascript" src="/socket.io/socket.io.js"></script>
 <script type="text/javascript" src="/javascripts/nicoscreen.js"></script>
 <script>
 $(function(){
 var socket = new io.connect("/");

 socket.on("connect", function(){
     $("#transportName").text("connect via " + socket.socket.transport.name);// 接続時に接続方式表示
 });

 socket.on("message", function(message){
     console.log("client:" + message);
     addComment(message);
 });

 $("#submitButton").click(function(event){
     socket.emit("message", {message: $("#msg").val()});// 入力メッセージをサーバへ
 });
 });
 </script>
 </head>
 
<body>
 <div id="transportName"></div>
 <input id="msg">
 <input id="submitButton" type="button" value="submit!">
 <ul></ul>
 </div>

<div id="nicoscreen" style="width:560px;height:349px"> </div>
<script type="text/javascript"> 
  var obj = {
      //基本情報が設定できます
      "base":{
      color:"black", //文字の色を指定します
      speed:"normal", //文字が流れるスピードを指定します。slow/fast/normal 
      interval:"normal",//文字が流れる間隔を指定します。slow/fast/normal
      font_size:"30px", //フォントのサイズを指定します。
      loop:false //文字が最後まで流れた後に、繰り返すかどうか　true/false
  },
  
  //ここに、重ねるコメントを登録します。個数制限はありません。
  "comments":[
  
  ]
  };

  nicoscreen.set(obj);
  nicoscreen.start();

  function addComment(msg){
  console.log("add!!:" + msg);
      var str = $(msg).val();
      nicoscreen.add(msg);
      $("#msg").val("");
  }

</script>

 </body>
</html>
